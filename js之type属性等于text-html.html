<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>无标题文档</title>
<script src="jquery-1.6.1.min.js"></script>
<script id="commentTemplate" type="text/html">
    <div class="photo">
        <a href="#"><img src="[UserImg]" /></a>
    </div>
    <p>
        <a href="#">[UserName]：</a><span class="time">[CreateDate]</span>
    </p>

</script>
</head>

<body>
    <div id="comment_ul_2">
    </div>
    <input type="button" id="addFun" value="click me" />
    <script type="text/javascript">
       var reg = new RegExp("\\[([^\\[\\]]*?)\\]", 'igm'); //i g m是指分别用于指定区分大小写的匹配、全局匹配和多行匹配。
       $("#addFun").click(function () {
            var html = document.getElementById("commentTemplate").innerHTML;
            var source = html.replace(reg, function (node, key) { return { 'UserImg': 'http://assets.changyan.sohu.com/portrait/prod_07/a9/6b/1f61097ccb54be14d6a47439b0_50.jpg', 'UserName': 'zhang', 'CreateDate': '2011-1-1'}[key]; });
            $("#comment_ul_2").append(source);
       });
       var zzl = "name:[name]";
       zzl = zzl.replace(reg, function (node, key) { return { 'name': '占占'}[key]; });
       alert(zzl);
    </script>
</body>
</html>
