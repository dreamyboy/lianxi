<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<!--http://www.jb51.net/article/16366.htm-->

<script type="text/javascript" src="http://lib.sinaapp.com/js/jquery/1.8/jquery.js"></script>

</head>

<body>


<script>
    //工厂模式

    //        function Person(name,gender,age){
    //
    //            var obj=new Object();
    //            obj.name=name;
    //            obj.gender=gender;
    //            obj.age=age;
    //            obj.tellAae=function(){
    //                console.log(this.age);
    //            }
    //            return obj;
    //        }
    //
    //        var puya=new Person('Puyart','male','21');
    //        puya.tellAae();


    //构造函数模式

    //
    //        function Person(name,gender,age){
    //            this.name=name;
    //            this.gender=gender;
    //            this.age=age;
    //            this.tellAge=function(){
    //                console.log(this.age);
    //            }
    //        }
    //
    //        var puya=new Person('Puyart','male','21');
    //        puya.tellAge();


    //原型链+构造函数模式

    function Person(name,gender,age){
        this.name=name;
        this.gender=gender;
        this.age=age;
    }


    Person.prototype.tellAge=function(){
        console.log(this.age);
    }

    var puya=new Person('Puyart','male','21');
    puya.tellAge();


</script>






<script>

   function jie(){
       console.log('测试');
   }

   //bad
   jie.prototype.jump=function(){
       this.jumping=true;
       return true;
   }
   jie.prototype.setHeight=function(height){
       this.height=height;
   }
   var luck=new jie();

   luck.jump(); //==> true
   luck.setHeight(20); //==> undefined


   //good
   jie.prototype.jump=function(){
       this.jumping=true;
       return this;
   }
   jie.prototype.setHeight=function(height){
       this.height=height;
       return this;
   }
   var luck=new jie();
   console.dir(luck.jump().setHeight(20));


</script>
<script>
    function Person(name,age,job){
        this.name = name;
        this.age = age;
        this.job = job;
        this.sayName = function(){
            alert(this.name);
        };
    }
    var olivia = {};
    Person.call(olivia,"tanya","30","female");
    olivia.sayName();
    var philip = {}
    Person.apply(philip,["ansel","30","male"]);
    philip.sayName();



</script>
    <script>
        var obj={
            init:function(){
                this.eventInit();
            },
            updateNum: function() {
                $.ajax({
                    type: "post",
                    url: "",
                    data: {
                        'goods_id': '275343731'
                    },
                    dataType: 'json',
                    success: function(res) {
                        console.log("success");
                    }
                });
            },
            eventInit:function(){
                var _this = this;//保存下this?

                $.ajax({
                    type: "post",
                    url: "",
                    data: {
                        'goods_id': '275343731'
                    },
                    dataType: 'json',
                    success: function(res) {
                        if (res.error_code == 0) {
                            _this.updateNum();  //为了在这里可以直接调用到obj的updateNum方法?
                        }


                    }
                });
            }
        }
        obj.init();
    </script>
</body>
</html>
